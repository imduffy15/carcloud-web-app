<form name="form" role="form" novalidate
      class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength">

    <div class="modal-header">
        <button type="button" class="close" aria-hidden="true" ng-click="cancel()">&times;</button>
        <h4 class="modal-title">Editing {{alert.description}}</h4>
    </div>

    <div class="modal-body">
        <div class="form-group">
            <label>Description</label>
            <input type="text" class="form-control" name="description"
                   ng-model="alert.description" ng-minlength=1 ng-maxlength=150
                   required>
        </div>

        <div class="form-group">
            <label>Trigger After</label>
            <input type="time" class="form-control" name="after" ng-model="alert.after">
        </div>


        <div class="form-group">
            <label>Trigger Before</label>
            <input type="time" class="form-control" name="before" ng-model="alert.before">
        </div>

        <div class="form-group">
            <label>Alert Fields</label>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Type</th>
                    <th>Operation</th>
                    <th>Field Name</th>
                    <th>Field Value</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="alertField in alert.fields" class="animate">
                    <td>{{alertField.field.type}}</td>
                    <td>{{alertField.operation}}</td>
                    <td>{{alertField.field.name}}</td>
                    <td>{{alertField.field.value}}</td>
                    <td>
                        <a ng-click="openEditFieldAlertModal(alertField, $index)"
                           class="btn btn-success">
                            <span class="ion-edit"></span> Edit
                        </a>
                        <a ng-click="delete($index)"
                           class="btn btn-danger">
                            <span class="ion-trash-b"></span> Delete
                        </a>
                    </td>
                </tr>
                <tr ng-cloak ng-hide="alert.fields.length">
                    <td colspan="5">No alert fields set.</td>
                </tr>
                </tbody>
            </table>
        </div>

        <button class="btn btn-primary" ng-click="openAddFieldAlertModal()">
            <span class="ion-android-add-circle"></span> Add a new alert field
        </button>

    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="cancel()">
            <span class="ion-android-cancel"></span> Cancel
        </button>
        <button type="submit" ng-disabled="form.$invalid || isSaving" class="btn btn-primary" ng-click="create()">
            <span class="ion-checkmark-circled"></span> Save
        </button>
    </div>

</form>
